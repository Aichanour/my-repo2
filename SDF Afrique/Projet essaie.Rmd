---
title: "Untitled1"
author: "BALDE"
date: "`r Sys.Date()`"
output:
  html_document: default
  word_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r}
# dataUnido <- gsheet::gsheet2tbl("https://docs.google.com/spreadsheets/d/1uLaXke-KPN28-ESPPoihk8TiXVWp5xuNGHW7w7yqLCc/edit?usp=sharing")
```


```{r}
library(gsheet)
library(dplyr)
library(tidyr)
library(readr)
```

```{r}
# library(dplyr)
# dataUnido %>%
# glimpse()
```

```{r}
# Loading the gsheet package
library(gsheet)
# Read data from the URL
#dataUnido <- gsheet::gsheet2tbl("https://docs.google.com/spreadsheets/d/1uLaXke-KPN28-ESPPoihk8TiXVWp5xuNGHW7w7yqLCc/edit#gid=416085055")
# head(dataUnido)
```


```{r}
# Loading the gsheet package
#library(gsheet)
# Read data from the URL
#variablesUnido <- gsheet::gsheet2tbl("https://docs.google.com/spreadsheets/d/1JYiydgI9QEOKAStmtmrBTmGuGQ0bx1gnnarO4Db0MD8/edit#gid=919352283")
#head(variablesUnido)
```


```{r}
library(readr)
gdp <-readr::read_csv("./chapitre6/chapter6data.csv")
```

```{r}
library(gsheet)
locations <-("https://docs.google.com/spreadsheets/d/1nehKEBKTQx11LZuo5ZJFKTVS0p5y1ysMPSOSX_m8dS8/edit?usp=sharing")
```

```{r}
# Loading the gsheet package
library(gsheet)
# Read data from the URL
# variablesUnido <- gsheet::gsheet2tbl("https://docs.google.com/spreadsheets/d/1nehKEBKTQx11LZuo5ZJFKTVS0p5y1ysMPSOSX_m8dS8/edit?usp=sharing")
#head(variablesUnido)
```

```{r}
# Loading the gsheet package
library(gsheet)
# Read data from the URL
#dataUnido <- gsheet::gsheet2tbl("https://docs.google.com/spreadsheets/d/1nehKEBKTQx11LZuo5ZJFKTVS0p5y1ysMPSOSX_m8dS8/edit?usp=sharing")
#head(dataUnido)
```

```{r}
library(readr)
gdp <-readr::read_csv("./chapitre6/gdpCountry.csv")
```
# Importez le fichier csv appelé chapter6data.csv.

```{r}
library(readr)
gdpB <-readr::read_csv("./chapitre6/chapter6data.csv")
```

```{r}
# Ajouter une nouvelle colonne avec comme valeur 42
gdp$nouvelleColonne <- 42
```

```{r}
# Afficher les noms des colonnes
colnames(gdp)
```

```{r}
# Afficher la nouvelle colonne'
head(gdp[,"nouvelleColonne"])
```

```{r}
# Multiplier par 2 et additionner 5
gdp$nouvelleColonne <- gdp$nouvelleColonne * 2 + 5
# Show the column 'newColumn'
head(gdp[,"nouvelleColonne"])
```

```{r}
library(dplyr)
# Renomer la nouvelle colonne par aissata
gdp <- gdp %>% 
  dplyr::rename(aissata = nouvelleColonne)
colnames(gdp)
head(gdp
     )
```


```{r}
# Supprimer la nouvelle colonne
gdp$aissata <- NULL
# Show columns' name
colnames(gdp)
```


```{r}
# erasing non important variables
gdp$isicCodeCombinaison <- NULL
gdp$tableDefinitionCode <- NULL
gdp$sourceCode <- NULL
gdp$updateYear <- NULL
gdp$unit <- NULL
```

```{r}
# Show columns' name
colnames(gdp)
#head(gdp)
```


```{r}
# Afficher la dimension
dim(gdp)
```

```{r}
#gdp$country == 2.35
```

```{r}
#tableDefinitionCode == 04 | tableDefinitionCode == 01
```

```{r}
# Filtrer en fonction de canada
library(dplyr)
# Subset of dataUnido based on countryCode == Canada
gdpcanada <- filter(gdp, country == "canada")
```

```{r}
# First lines of the dataframe
head(gdpcanada)
```

```{r}
# Number of columns & rows
dim(gdpcanada)
```

```{r}
# Subset of dataUnidoCanada based on two variables (number of employees and establishments)
filtregdpcanada <- filter(gdp, country == "belgium" | country == 	
"australia")
```

```{r}
# First lines of the dataframe
head(filtregdpcanada)
```


```{r}
filtredategdpcanada <- filter(gdpA, date > 2011)
```


```{r}
# First lines of the dataframe
head(filtredategdpcanada)
```

```{r}
# Dimension of the dataframe
 dim(filtredategdpcanada)
```

```{r}
# essaie valide
library(dplyr)
# dataSorted will receive the dataframe dataUnidoCanadaVariablesAfter2009 sorted by the column value
dataSorted <- arrange(gdp2, value)
# first 6 lines of the dataset
head(gdp2)
```

```{r}
# essaie valide
dataSorted <- arrange(gdp2, value)
# first 6 lines of the dataset
head(gdp2)
```

```{r}
# essaie valide
# dataReverse is the opposite of dataSorted, i.e. the first lines will have the highest values
dataReverse <- arrange(filtredategdpcanada, desc(value))
# first 6 lines of the dataset
head(filtredategdpcanada)
```

```{r}
# essaie valide
# dataReverse is the opposite of dataSorted, i.e. the first lines will have the highest values
dataReverse <- arrange(filtredategdpcanada, desc(date))
# first 6 lines of the dataset
head(filtredategdpcanada)
```

```{r}
gpd1 <- readr::read_csv("./chapitre6/gdpCountry.csv")

```

```{r}
gpd1$variable<-NULL
#colnames(gpd1)
head(gpd1)
```

```{r}
gpd1 <- readr::read_csv("./chapitre6/gdpCountry.csv")

#head(gpd1)
```

```{r}
#Supprimer la colonne date
gpd1$country<-NULL
colnames(gpd1)
```

```{r}
# essaie valide
library(dplyr)
gdp2 <-filter(gdpA, country=="canada"|country=="australia")
head(gdp2)
```

```{r}
# essaie valide
library(dplyr)
gdp2 <-filter(gdpA, country=="belgium")
head(gdp2)
```

```{r}
# Forme longue
library(tidyr)
# Tranposer country avec la valeur value
wideData <- dataSorted %>%
  pivot_wider(names_from = country, values_from = value)
```

```{r}
# Affichage
head(wideData)
```

```{r}
# Dimension of the dataset
dim(wideData)
```

```{r}
# Loading tidyr
library(tidyr)
# Using pivot_longer() to transform from wide to long data
#longData <- wideData %>% 
#pivot_longer(!c(gdpA, country), names_to = "country", values_to = "date")
```

```{r}
# Dimension of the dataframe
#dim(longData)
```

```{r}
# First 6 lines
#head(longData)
```

```{r}
library(tidyr)
# Transposer les années avec value 
gdp3 <- dataSorted %>%
  pivot_wider(names_from = date, values_from = value)
head(gdp3)
```

```{r}
# Loading tidyr
#library(tidyr)
# Using pivot_longer() to transform from wide to long data
#longData <- wideData %>% 
  #pivot_longer(!c(capital,continent), names_to = "long", values_to = "lat")
```


```{r}
#head(longData)
```


```{r}
# Exo 4: Filtrer les colonnes value, country, variable
gdp4 <- left_join(gdpA, gpd1, c("value","variable"))

head(gdp4)
```


